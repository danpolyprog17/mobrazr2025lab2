# Инструкция по запуску Lab3

## Быстрый старт

### Шаг 1: Запустить API сервер

Откройте **первый терминал** и выполните:

```bash
cd "/home/daniel/Documents/MobDev/2 лаба/lab3/api-server"
npm run dev
```

Сервер запустится на порту **3001** и будет доступен по адресу:
- `http://localhost:3001` (для локального тестирования)
- `http://192.168.0.20:3001` (для подключения с мобильного устройства)

**Оставьте этот терминал открытым!**

---

### Шаг 2: Запустить мобильное приложение

Откройте **второй терминал** и выполните:

```bash
cd "/home/daniel/Documents/MobDev/2 лаба/lab3"
npm start
```

Откроется Expo DevTools. Вы увидите QR-код и меню с опциями.

---

### Шаг 3: Подключиться к приложению

Выберите один из способов:

#### Вариант A: На реальном устройстве (Android/iOS)
1. Установите приложение **Expo Go** из App Store или Google Play
2. Откройте Expo Go
3. Отсканируйте QR-код из терминала
4. Или введите URL вручную: `exp://192.168.0.20:8081`

#### Вариант B: В эмуляторе Android
В терминале с Expo нажмите клавишу **`a`**

#### Вариант C: В iOS симуляторе (только на Mac)
В терминале с Expo нажмите клавишу **`i`**

#### Вариант D: В веб-браузере
В терминале с Expo нажмите клавишу **`w`** или откройте `http://localhost:8081`

---

## Важные замечания

1. **Оба терминала должны быть открыты одновременно:**
   - Терминал 1: API сервер (порт 3001)
   - Терминал 2: Expo приложение (порт 8081)

2. **Настройка API URL:**
   - **Для Android ЭМУЛЯТОРА**: В файле `config/api.js` раскомментируйте строку с `10.0.2.2:3001`
   - **Для реального Android/iOS устройства**: Используйте IP адрес вашего компьютера (по умолчанию `192.168.0.20:3001`)
   - Если ваш IP другой, измените его в `config/api.js`

3. **Проверка работы API:**
   - Откройте в браузере: `http://localhost:3001/api/test-db`
   - Должен вернуться JSON с `{"success": true}`

4. **Если видите ошибку "Network request failed":**
   - Убедитесь, что API сервер запущен
   - Для Android эмулятора используйте `10.0.2.2:3001` вместо IP адреса
   - Для реального устройства убедитесь, что устройство и компьютер в одной Wi-Fi сети

---

## Остановка

Для остановки:
- В терминале с API сервером: нажмите `Ctrl+C`
- В терминале с Expo: нажмите `Ctrl+C`

---

## Устранение проблем

### Проблема: "Cannot connect to API"
- Убедитесь, что API сервер запущен на порту 3001
- Проверьте IP адрес в `config/api.js`
- Для реального устройства: убедитесь, что устройство и компьютер в одной Wi-Fi сети

### Проблема: "Port already in use"
- Остановите процессы: `pkill -f "node.*server.js"` и `pkill -f "expo"`
- Или измените порт в `api-server/server.js` (строка 19)

### Проблема: "Database connection error"
- Проверьте строку подключения в `api-server/server.js`
- База данных Neon PostgreSQL должна быть доступна

