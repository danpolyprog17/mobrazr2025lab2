# Отладка проблем с загрузкой данных

## Проблема: Бесконечная загрузка

Если приложение показывает бесконечную загрузку, проверьте следующее:

### 1. Проверьте, что API сервер запущен

```bash
# Проверьте, что процесс запущен
ps aux | grep "node.*server.js"

# Проверьте доступность API
curl http://localhost:3001/api/test-db
```

Должен вернуться JSON: `{"success":true,"message":"Database connected successfully"}`

### 2. Проверьте логи в консоли

В терминале с Expo вы должны видеть логи:
- `[API Config] Platform: android, Base URL: http://10.0.2.2:3001`
- `[API] GET http://10.0.2.2:3001/api/expenses`
- `[API] Response status: 200 OK`

Если видите ошибки `Network request failed`, значит:
- API сервер не запущен ИЛИ
- Неправильный URL в конфигурации

### 3. Проверьте конфигурацию API

Откройте `config/api.js` и убедитесь:
- Для Android эмулятора: `http://10.0.2.2:3001`
- Для реального устройства: `http://192.168.0.20:3001` (замените на ваш IP)

### 4. Проверьте доступность API из эмулятора

В Android эмуляторе `10.0.2.2` - это специальный IP для доступа к localhost хоста.

Проверьте в браузере эмулятора (если есть):
- `http://10.0.2.2:3001/api/test-db`

### 5. Перезапустите приложение

После изменения конфигурации:
1. Остановите Expo (Ctrl+C)
2. Перезапустите: `npm start`
3. Перезагрузите приложение в эмуляторе (нажмите `r` в терминале Expo)

### 6. Очистите кэш

Если проблема сохраняется, очистите кэш:
```bash
# В терминале Expo
npm start -- --clear
```

### 7. Проверьте логи API сервера

В терминале с API сервером должны появляться логи при каждом запросе:
```
GET /api/expenses 200
```

Если логов нет, значит запросы не доходят до сервера.

## Частые проблемы

### Проблема: "Network request failed"
**Решение:** 
- Убедитесь, что API сервер запущен
- Проверьте правильность URL в `config/api.js`
- Для эмулятора используйте `10.0.2.2`, для реального устройства - IP адрес

### Проблема: "Request timeout"
**Решение:**
- Проверьте, что сервер отвечает быстро
- Увеличьте таймаут в `utils/apiClient.js` (сейчас 30 секунд)

### Проблема: Данные не загружаются, но ошибок нет
**Решение:**
- Проверьте логи в консоли Expo
- Проверьте, что API возвращает данные: `curl http://localhost:3001/api/expenses`
- Проверьте формат ответа - должен быть массив или объект с данными


